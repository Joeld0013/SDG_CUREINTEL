:root {
        --bg-color: #f1f3f4;
        --card-bg: #ffffff;
        --primary-text: #2d3748;
        --secondary-text: #718096;
        --icon-bg-dark: #3d4a5c;
        --user-bubble: #007bff;
        --bot-bubble: #ffffff;
        --success-color: #4caf50;
        --error-color: #f44336;
        --warning-color: #ff9800;
        --font-family: 'Poppins', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        font-family: var(--font-family);
        background-color: var(--bg-color);
        color: var(--primary-text);
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    .header-section {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 15px;
        background: var(--card-bg);
        border-bottom: 1px solid #e2e8f0;
        flex-shrink: 0;
    }
    .icon-orb { width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; }
    .logo-image { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
    .main-title { font-size: 17px; font-weight: 600; }
    .conversation-area {
        flex: 1;
        overflow-y: auto;
        padding: 20px 15px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        position: relative;
    }
    .conversation-area::before {
        content: '';
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        width: 150px; height: 150px;
        background-image: url('HealthGuardAI.jpeg');
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        opacity: 0.08;
        z-index: 0;
    }
    .placeholder-text { text-align: center; margin: auto; color: var(--secondary-text); z-index: 1; }
    .message { display: flex; gap: 10px; margin-bottom: 15px; animation: slideIn 0.3s ease-out; z-index: 1; position: relative; align-items: flex-start; }
    .message.user { flex-direction: row-reverse; }
    .message-avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; margin-top: 5px; }
    .message.user .message-avatar { background: var(--user-bubble); color: white; }
    .message.bot .message-avatar { background: var(--icon-bg-dark); color: white; }
    .message-content { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.5; word-wrap: break-word; }
    .message.user .message-content { background: var(--user-bubble); color: white; border-bottom-right-radius: 4px; }
    .message.bot .message-content { background: var(--bot-bubble); color: var(--primary-text); border: 1px solid #e2e8f0; border-bottom-left-radius: 4px; }
    .message-image { max-width: 100%; border-radius: 12px; display: block; }
    .message-image-container + .message-text { margin-top: 8px; }
    .loading { display: flex; align-items: center; gap: 8px; color: var(--secondary-text); }
    .loading-spinner { width: 16px; height: 16px; border: 2px solid #e0e0e0; border-top: 2px solid var(--user-bubble); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .validation-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 10px;
        margin-bottom: 12px;
        font-weight: 600;
    }
    .validation-header.accurate { background-color: rgba(76, 175, 80, 0.1); color: #2e7d32; }
    .validation-header.misleading { background-color: rgba(244, 67, 54, 0.1); color: #c62828; }
    .validation-header.unverifiable { background-color: rgba(255, 152, 0, 0.1); color: #ef6c00; }
    .classification-icon { font-size: 16px; }
    .confidence-score { margin-left: auto; font-size: 11px; font-weight: 500; opacity: 0.8; }
    .summary-text { font-weight: 500; margin-bottom: 10px; border-bottom: 1px solid #eef0f2; padding-bottom: 10px; }
    .details-section h4 {
        font-size: 14px;
        margin-top: 15px;
        margin-bottom: 5px;
        color: var(--primary-text);
    }
    .details-section p {
        font-size: 13px;
        line-height: 1.6;
        color: var(--secondary-text);
    }
    .sources-table {
        width: 100%;
        margin-top: 10px;
        border-collapse: collapse;
        font-size: 12px;
    }
    .sources-table th, .sources-table td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #eef0f2;
    }
    .sources-table th {
        color: var(--primary-text);
        font-weight: 600;
    }
    .sources-table a {
        color: var(--user-bubble);
        text-decoration: none;
        font-weight: 500;
    }
    .sources-table a:hover {
        text-decoration: underline;
    }

    .input-section { padding: 10px 15px 15px 15px; background: var(--card-bg); border-top: 1px solid #e2e8f0; flex-shrink: 0; }
    .image-preview-wrapper {
        padding: 0 0 8px 42px;
    }
    .image-preview-container {
        position: relative;
        width: 72px; height: 72px;
        border-radius: 12px;
        overflow: hidden;
        background-color: var(--bg-color);
        border: 1px solid #e2e8f0;
        display: inline-block;
    }
    .preview-thumbnail {
        width: 100%; height: 100%;
        /* This is the crucial fix: 'contain' fits the whole image inside the box */
        object-fit: contain;
    }
    .remove-image-btn {
        position: absolute;
        top: 4px; right: 4px;
        width: 20px; height: 20px;
        background: rgba(0, 0, 0, 0.6);
        color: white;
        border: 1.5px solid white;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        line-height: 1;
        transition: transform 0.2s, background-color 0.2s;
    }
    .remove-image-btn:hover {
        transform: scale(1.1);
        background: rgba(0, 0, 0, 0.8);
    }
    
    .input-container { display: flex; align-items: center; gap: 8px; background: var(--bg-color); border-radius: 22px; padding: 5px 8px; }
    .file-upload-btn, .voice-btn, .send-btn { width: 34px; height: 34px; border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 15px; transition: all 0.2s ease; flex-shrink: 0; }
    .text-input { flex: 1; border: none; outline: none; background: transparent; font-family: var(--font-family); font-size: 14px; resize: none; min-height: 21px; max-height: 100px; padding: 6px 0; line-height: 1.5; }
    .send-btn, .voice-btn { background: var(--user-bubble); color: white; }
    .send-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    #fileInput { display: none; }
    .voice-btn.is-listening { background-color: var(--error-color); animation: pulse 1.5s infinite; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(244, 67, 54, 0); } 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); } }

    .action-buttons {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        flex-wrap: wrap;
        justify-content: center;
    }
    .action-btn {
        padding: 6px 12px;
        border: 1px solid #d8dde3;
        background: white;
        border-radius: 15px;
        font-size: 11px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: var(--secondary-text);
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .action-btn:hover {
        background: #f7fafc;
        border-color: var(--user-bubble);
        color: var(--user-bubble);
    }